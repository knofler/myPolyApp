<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="my-element">

  <template>

  <!-- link css here   -->
  <link rel="stylesheet" href="my-element.css">


    <core-drawer-panel transition id="core_drawer_panel" touch-action>
      <section id="section" drawer>
        <core-menu selected="1" selectedindex="1" id="core_menu">
          
          <core-submenu id="core_submenu" icon="settings" label="Todos">
            <core-item id="core_item1" label="This week" horizontal center layout></core-item>
            <core-item id="core_item2" label="Last week" horizontal center layout></core-item>
          </core-submenu>

          <core-submenu active id="core_submenu1" icon="settings" label="iDid">
            <core-item id="core_item3" label="This year" horizontal center layout></core-item>
            <core-item id="core_item4" label="Last year" horizontal center layout></core-item>
            <core-item id="core_item5" label="Timeline" horizontal center layout></core-item>
          </core-submenu>
        </core-menu>
      </section>
      <section id="section" main>

    <!--   $('.infinite-scroll').jscroll({
    loadingHtml: '<img src="loading.gif" alt="Loading" /> Loading...',
    padding: 20,
    nextSelector: 'a.jscroll-next:last',
    contentSelector: 'li'
}); -->
  
  <!-- **********************************DATABASE Connection elements via ajax call*********************************************  -->

        <!-- database Connection using core-ajax componenet -->
        <!--     <core-ajax
                  auto
                  url="https://metest.firebaseio.com/goals.json"
                  params='{"rows":"3"}'
                  handleAs="json"
                  response="{{goals}}">
             </core-ajax> -->

             <!-- Include firebase element -->
             <firebase-element
              id="ref"
              location="https://metest.firebaseio.com/goals"
              data="{{goals}}"
              keys="{{keys}}">
              </firebase-element>
      
      <!-- Header panel -->
      <core-header-panel condenses flex mode="waterfall-tall" id="core_header_panel">
         
          <core-toolbar id="core_toolbar" class="tall">
            <!-- <core-icon-button icon="arrow-back" onClick="showDrawer" id="core_icon_button"></core-icon-button> -->
            <core-icon-button icon="menu" id="core_icon_button" on-tap="{{showDrawer}}" theme="core-light-theme"></core-icon-button>
            <div id="div" flex></div>
            <core-icon-button icon="search" id="core_icon_button1"></core-icon-button>
              <paper-menu-button>
                <paper-icon-button icon="more-vert">
                </paper-icon-button>
                <paper-dropdown class="dropdown" halign="right">
                  <core-menu class="menu">
                    <paper-item>Settings</paper-item>
                    <paper-item>Help</paper-item>
                    <paper-item>Feedback</paper-item>
                  </core-menu>
                </paper-dropdown>
              </paper-menu-button>
        
             <div id="div1" class="bottom indent">
             <form horizontal layout on-submit="{{addTask}}">
                  <input id="input" value="{{goalName}}" placeholder="Write task ..." is="core-input">
             </div>

           </core-toolbar>


           <div class="bottom indent todo">   

            <template repeat="{{key in keys}}">
             <!-- ***************************Each card for task display******************** -->              
              <div class="todoTask">   
                  <div class="cardHead"> 
                      <span class="toggleComplete">
                        <paper-toggle-button id="paper_toggle_button"></paper-toggle-button>
                      </span>
                      <span class="taskTitle"><strong>{{goals[key].goalName}}</strong></span>
                      <span class="arrowDown">
                        <paper-menu-button>
                          <paper-icon-button icon="more-vert">
                          </paper-icon-button>
                          <paper-dropdown class="dropdown" halign="right">
                            <core-menu class="menu">
                              <paper-item>Settings</paper-item>
                              <paper-item>Help</paper-item>
                              <paper-item>Feedback</paper-item>
                            </core-menu>
                          </paper-dropdown>
                        </paper-menu-button>
                        </span>
                    </div>
                   
                  
                  <div class="progress">
                    <paper-progress value="{{goals[key].progress}}" secondaryProgesss="30"></paper-progress>
                  </div>

                  <div class="cardBody">
                    <span class="taskDetails" horizontal start-justified layout>
                       {{goals[key].goalDesc}}
                    </span>
                  </div>
                 <div class="taskList">
                 <ul>
                 <template repeat="{{task in goals[key].tasks}}">
                    <li>{{task.taskItem}}</li>
                    </template>
                  </ul>
                  </div>
                  <div class="cardComment">
                     <paper-input-decorator auto-complete floatingLabel label="Your goals" id="paper1" error="Value must start with a number!">
                        <input id="input1" is="core-input" pattern="^[0-9].*">
                    </paper-input-decorator>
                  </div>
                  <div class="cardFooter">
                   <core-icon-button class="room iconbar" icon="room"></core-icon-button>
                   <core-icon-button class="phone iconbar" icon="perm-phone-msg"></core-icon-button>
                   <core-icon-button class="star iconbar" icon="star"></core-icon-button>
                   <core-icon-button class="reply iconbar" icon="reply"></core-icon-button>
                  </div>
                </div>
              <!-- *************************** ## End of cards ## ******************** -->   
              </template>

           </div>

        </core-header-panel>
      </section>
   </template>
  <script>
    Polymer('my-element',{
      goalName : '',
      showDrawer: function(){
          alert("hello");
      },
      addTask: function(e){
          e.preventDefault();
          this.$.ref.push({goalName:this.goalName});
          this.goalName = '';
      }
    });
   </script>
 </polymer-element>